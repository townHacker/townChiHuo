## -*- coding: utf-8 -*-

<%inherit file="permission.tmpl" />

<%block name="style">
</%block>

<%block name="javascript">
</%block>

<%block name="main_content">

<!-- 角色管理 -->
<div class="div-box">
  <h4 class="div-box-title">角色管理</h4>
  <div class="div-box-content">
    <div class="div-box-content-left">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>角色名称</th>
            <th>操作</th>
        </thead>
        <tbody>
          <tr>
            <td colspan="3">
              <div>
                &lt; 1/100 &gt;
                <a href="#" class="button">下一页</a>
                <a href="#" class="button">上一页</a>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="div-box-content-right">

    </div>
    
  </div>
</div>
<!-- 角色管理结束 -->

<!-- 角色添加 -->
<div class="div-box">
  <h4 class="div-box-title">角色添加</h4>
  <div class="div-box-content">

    <div class="div-box-content-left">
      <form action="/manage/role/add" method="post" id="addRole_form">
        <div class="box-line">
          <label for="role_name">角色名称:</label>
          <input type="text" name="role_name" id="role_name" />
        </div>
        <div class="box-line">
          <label for="parent_role">上级角色:</label>
          <span>
            <div class="box-line">
              <select name="parent_role" size="5" multiple="multiple" id="parent_role">
                <option value="option_1">Option 1</option>
                <option value="option_2">Option 2</option>
              </select>
              <input type="button" class="button" value="删除" id="btn_delParentRole" />
            </div>
            <div class="box-line">
              <select name="select_parent_role" size="1" id="select_parent_role">
                <option value="selected_role">Select Option</option>
              </select>
              <input type="button" class="button" value="添加" id="btn_addParentRole" />
            </div>
          </span>
        </div>
        <div class="box-line">
          <input type="submit" class="button" value="添加角色" />
        </div>
      </form>
    </div>

    <div class="div-box-content-right">
    </div>
    
  </div>
</div>
<script type="text/javascript">
  $('#addRole_form').submit(function() {
      try {
          var parent_role = [];
          $('#parent_role > option').each(function() {
              parent_role.push($(this).attr('value'));
          });
          
          $.ajax({
              url: $(this).attr('action'),
              type: $(this).attr('method'),
              dataType: 'json',
              data: { role_name: $('#role_name').val(), parent_role: parent_role },
              traditional: true, 
              success: function(data) {
                  if (data) {
                      alert(data.msg);
                  }
              },
              error: function() {
                  alert('AJAX ERROR!!!');
              }, 
          });
      } catch(err) {
          alert("ERROR : " + err);
      }
      return false;
  });
</script>
<!-- 角色添加结束 -->

</%block>



